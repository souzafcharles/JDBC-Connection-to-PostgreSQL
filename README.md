#  Object-oriented and SQL revision using Java and JDBC

**Instructions**: Develop a Java application that connects to a database using `JDBC` and interfaces following the `DAO pattern`, featuring entity classes for `Order` and `Product`. The target database is `chdeliver`.

## Steps to Follow:

### 1. Database Configuration:
- Add the lib `postgresql-42.2.18.jar` to the project;
- Establish a database named `chdeliver` using `pgAdmin 4`;
- In the project's root folder, create a file named `db.properties` containing the connection data:

#### db.properties File:

```SQL
user=postgres
password=******
dburl=jdbc:postgresql://localhost:5432/chdeliver
useSSL=false
```
### 2. Database Table Creation:
- Create an SQL script to store data in the `chdeliver` database.
#### database.sql Script:
```SQL
-- Drop table 'tb_order_product' if it exists
DROP TABLE IF EXISTS tb_order_product;

-- Drop table 'tb_order' if it exists
DROP TABLE IF EXISTS tb_order;

-- Drop table 'tb_product' if it exists
DROP TABLE IF EXISTS tb_product;

-- Create table 'tb_order' if it does not exist
CREATE TABLE IF NOT EXISTS tb_order (
    id int8 generated by default as identity, 
    latitude float8, 
    longitude float8, 
    moment TIMESTAMP WITHOUT TIME ZONE, 
    status int4, 
    primary key (id)
);

-- Create table 'tb_order_product' if it does not exist
CREATE TABLE IF NOT EXISTS tb_order_product (
    order_id int8 not null, 
    product_id int8 not null, 
    primary key (order_id, product_id)
);

-- Create table 'tb_product' if it does not exist
CREATE TABLE IF NOT EXISTS tb_product (
    id int8 generated by default as identity, 
    description TEXT, 
    image_uri varchar(255), 
    name varchar(255), 
    price float8, 
    primary key (id)
);

-- Add foreign key constraints to 'tb_order_product' only if they do not exist
ALTER TABLE tb_order_product 
ADD CONSTRAINT fk_tb_order_product_tb_product 
FOREIGN KEY (product_id) REFERENCES tb_product;

ALTER TABLE tb_order_product 
ADD CONSTRAINT fk_tb_order_product_tb_order 
FOREIGN KEY (order_id) REFERENCES tb_order;

-- Insert data into 'tb_product'
INSERT INTO tb_product (name, price, image_uri, description) VALUES 
('Pizza de Calabresa Grande', 50.0, 'https://github.com/souzafcharles/1.png', 'Deliciosa pizza de calabresa com queijo muçarela, molho de tomate especial e orégano. Disponível em tamanho grande.'),
('Pizza Quatro Queijos Média', 40.0, 'https://github.com/souzafcharles/2.png', 'Uma explosão de sabores com queijo gorgonzola, queijo provolone, queijo parmesão e queijo muçarela. Ideal para compartilhar.'),
('Pizza de Escarola com Bacon Grande', 60.0, 'https://github.com/souzafcharles/3.png', 'Combinação perfeita de escarola refogada com bacon crocante, coberta com queijo muçarela e molho branco. Uma delícia!');

-- Insert data into 'tb_order'
INSERT INTO tb_order (status, latitude, longitude, moment) VALUES 
(0, 213123, 12323, TIMESTAMP WITH TIME ZONE '2025-01-14T11:00:00Z'),
(1, 3453453, 3534534, TIMESTAMP WITH TIME ZONE '2025-01-15T11:00:00Z');

-- Insert data into 'tb_order_product'
INSERT INTO tb_order_product (order_id, product_id) VALUES 
(1, 1),
(1, 2),
(2, 2),
(2, 3);
```
### 3. Entities Classes:
- Create the `Order` and `Product` classes;

![Order and Product Entities](https://github.com/souzafcharles/JDBC-Connection-to-PostgreSQL/blob/main/img/order-product-entities.png)

#### Entities classes checklist:
- Attributes;
- Constructors;
- Getters/Setters;
- hashCode and equals;
- toString;
- Implements Serializable.

### 4. Tutorial Video Tests Checklist:
- Primary key and Foreign key;
- DDL (create table, alter table);
- SQL:
  - INSERT;
  - SELECT;
  - INNER JOIN;
- Classes and Objects;
- Encapsulation, get/set;
- Enumerated types;
- Object Composition;
- Collections (List and Map);
- Accessing data in a Relational Database and instantiating corresponding objects;
#### Query to retrieve Orders with their Products:
```SQL
SELECT * FROM tb_order
INNER JOIN tb_order_product ON tb_order.id = tb_order_product.order_id
INNER JOIN tb_product ON tb_product.id = tb_order_product.product_id
```

▶️ [Tutorial Video DevSuperior](https://www.youtube.com/watch?v=xC_yKw3MYX4&ab_channel=DevSuperior)



